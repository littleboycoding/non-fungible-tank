
ÀT¸T(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{600:function(e,t,a){"use strict";a.r(t);var o=a(24),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"host-a-single-page-website"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#host-a-single-page-website"}},[e._v("#")]),e._v(" Host a single-page website")]),e._v(" "),a("p",[e._v("A great way to get to know IPFS is to use it to host a simple, single-page website. Here's a step-by-step guide to doing just that.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("We've put together a series of tutorials to walk you through hosting a full website on IPFS. "),a("RouterLink",{attrs:{to:"/how-to/websites-on-ipfs/single-page-website/"}},[e._v("Take a look!")])],1)]),e._v(" "),a("h2",{attrs:{id:"create-your-site"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-your-site"}},[e._v("#")]),e._v(" Create your site")]),e._v(" "),a("p",[e._v("Assume you have a static website in a directory "),a("code",[e._v("mysite")]),e._v(".")]),e._v(" "),a("p",[e._v("In order to publish it as a site, "),a("RouterLink",{attrs:{to:"/install/"}},[e._v("install IPFS")]),e._v(" and make sure your IPFS daemon is running:")],1),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ ipfs daemon\n")])])]),a("p",[e._v("Then add the directory with your website:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v(" mysite\nimg index.html\n$ ipfs "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" -r mysite\nadded QmcMN2wqoun88SVF5own7D5LUpnHwDA6ALZnVdFXhnYhAs mysite/img/spacecat.jpg\nadded QmS8tC5NJqajBB5qFhcA1auav14iHMnoMZJWfmr4k3EY6w mysite/img\nadded QmYh6HbZhHABQXrkQZ4aRRSoSa6bb9vaKoHeumWex6HRsT mysite/index.html\nadded QmYeAiiK1UfB8MGLRefok1N7vBTyX8hGPuMXZ4Xq1DPyt7 mysite/\n")])])]),a("p",[e._v("The last hash, next to the folder name, "),a("code",[e._v("mysite/")]),e._v(" is the one to remember, call it "),a("code",[e._v("$SITE_CID")]),e._v(" for now.")]),e._v(" "),a("p",[e._v("You can test it out locally by opening "),a("code",[e._v("http://localhost:8080/ipfs/$SITE_CID")]),e._v(" in a browser or with "),a("code",[e._v("wget")]),e._v(" or "),a("code",[e._v("curl")]),e._v(" from the command line.")]),e._v(" "),a("p",[e._v("To view it from another ipfs node, you can try "),a("code",[e._v("http://gateway.ipfs.io/ipfs/$SITE_CID")]),e._v(" in a browser. This will work from a browser on another device, inside or outside the network where you added the site's file.")]),e._v(" "),a("p",[e._v("Those hashes are difficult to remember. Let's look at some ways to get rid of them.")]),e._v(" "),a("h2",{attrs:{id:"edit-your-dns-records"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#edit-your-dns-records"}},[e._v("#")]),e._v(" Edit your DNS records")]),e._v(" "),a("p",[e._v("Assume you have the domain name "),a("code",[e._v("your.domain")]),e._v(" and can access your registrar's control panel to manage DNS entries for it.")]),e._v(" "),a("p",[e._v("Create a DNS TXT record ("),a("RouterLink",{attrs:{to:"/concepts/dnslink/"}},[e._v("DNSLink")]),e._v("), with the key "),a("code",[e._v("your.domain.")]),e._v(" and the value "),a("code",[e._v("dnslink=/ipfs/$SITE_CID")]),e._v(" where "),a("code",[e._v("$SITE_CID")]),e._v(" is the value from the section above.")],1),e._v(" "),a("p",[e._v("Once you've created that record, and it has propagated you should be able to find it.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("dig")]),e._v(" +noall +answer TXT your.domain\nyour.domain.            "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("60")]),e._v("      IN      TXT     "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dnslink=/ipfs/'),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$SITE_CID")]),e._v('"')]),e._v("\n")])])]),a("p",[e._v("Now you can view your site at "),a("code",[e._v("http://localhost:8080/ipns/your.domain")]),e._v(".")]),e._v(" "),a("p",[e._v("You can also try this on the gateway at "),a("code",[e._v("http://gateway.ipfs.io/ipns/your.domain")]),e._v(".")]),e._v(" "),a("p",[e._v("More questions about DNSLink? Check out the "),a("a",{attrs:{href:"http://dnslink.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("DNSLink website"),a("OutboundLink")],1),e._v(" for tutorials, examples, and FAQs.")]),e._v(" "),a("h2",{attrs:{id:"use-ipns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-ipns"}},[e._v("#")]),e._v(" Use IPNS")]),e._v(" "),a("p",[e._v("Each time you change your website, you will have to republish it, update the DNS TXT record with the new value of "),a("code",[e._v("$SITE_CID")]),e._v(" and wait for it to propagate.")]),e._v(" "),a("p",[e._v("You can get around that limitation by using IPNS, the "),a("RouterLink",{attrs:{to:"/concepts/ipns/"}},[e._v("InterPlanetary Naming System")]),e._v(".")],1),e._v(" "),a("p",[e._v("You might have noticed "),a("code",[e._v("/ipns/")]),e._v(" instead of "),a("code",[e._v("/ipfs/")]),e._v(" in the updated links in the previous section.")]),e._v(" "),a("p",[e._v("The IPNS is used for mutable content in the IPFS network. It's relatively easy to use, and will allow you to change your website without updating the dns record every time.")]),e._v(" "),a("p",[e._v("To enable the IPNS for your content, run the following command, where "),a("code",[e._v("$SITE_CID")]),e._v(" is the hash value from the first step.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ ipfs name publish "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$SITE_CID")]),e._v("\nPublished to "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PEER_ID")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" /ipfs/"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$SITE_CID")]),e._v("\n")])])]),a("p",[e._v("You will need to note and save that value of "),a("code",[e._v("$PEER_ID")]),e._v(" for the next steps.")]),e._v(" "),a("p",[e._v("Load the urls "),a("code",[e._v("http://localhost:8080/ipns/$PEER_ID")]),e._v(" and "),a("code",[e._v("http://gateway.ipfs.io/ipns/$PEER_ID")]),e._v(" to confirm this step.")]),e._v(" "),a("p",[e._v("Return to your registrar's control panel, change the DNS TXT record with the key of "),a("code",[e._v("your.domain")]),e._v(" to "),a("code",[e._v("dnslink=/ipns/$PEER_ID")]),e._v(", wait for that record to propagate, and then try the urls "),a("code",[e._v("http://localhost:8080/ipns/your.domain")]),e._v(" and "),a("code",[e._v("http://gateway.ipfs.io/ipns/your.domain")]),e._v(".")]),e._v(" "),a("p",[a("strong",[e._v("Note:")]),e._v(" When using IPNS to update websites, assets may be loaded from two different resolved hashes while the update propagates. This may result in outdated URLs or missing assets until the update has completely propagated.")]),e._v(" "),a("h2",{attrs:{id:"point-your-domain-to-ipfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#point-your-domain-to-ipfs"}},[e._v("#")]),e._v(" Point your domain to IPFS")]),e._v(" "),a("p",[e._v("You now have a website on ipfs/ipns, but your visitors can't access it at "),a("code",[e._v("http://your.domain")]),e._v(".")]),e._v(" "),a("p",[e._v("What we can do is have requests for "),a("code",[e._v("http://your.domain")]),e._v(" resolved by an IPFS gateway daemon.")]),e._v(" "),a("p",[e._v("Return to your registrar's control panel and add an A record with key of "),a("code",[e._v("your.domain")]),e._v(" and value of the IP address of an ipfs daemon that listens on port 80 for HTTP requests (such as "),a("code",[e._v("gateway.ipfs.io")]),e._v("). If you don't know the IP address of the daemon you plan to use, you can find it using the command like:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("nslookup")]),e._v(" gateway.ipfs.io\n")])])]),a("ol",[a("li",[e._v("Note the IP addresses returned.")]),e._v(" "),a("li",[e._v("Create an A record for each IPv4 address (e.g. "),a("code",[e._v("209.94.90.1")]),e._v(" for ipfs.io).")]),e._v(" "),a("li",[e._v("Create an AAAA record for each IPv6 address (e.g. use "),a("code",[e._v("2602:fea2:2::1")]),e._v(" for ipfs.io).")])]),e._v(" "),a("p",[e._v("Note: The ipfs.io gateway IP addresses won't change, so you can set them and forget them. If you use a custom gateway where you don't control the IP address and they could change you may need to re-check them periodically and update your DNS records if they do.")]),e._v(" "),a("p",[e._v("Visitors' browsers will send "),a("code",[e._v("your.domain")]),e._v(" in the Host header of their requests. The ipfs gateway will recognize "),a("code",[e._v("your.domain")]),e._v(", look up the value of the DNS TXT for your domain, then serve the files in "),a("code",[e._v("/ipns/your.domain/")]),e._v(" instead of "),a("code",[e._v("/")]),e._v(".")]),e._v(" "),a("p",[e._v("If you point "),a("code",[e._v("your.domain")]),e._v("'s A and AAAA record to the IP addresses of "),a("code",[e._v("gateway.ipfs.io")]),e._v(", and then wait for the DNS to propagate, then anyone should be able to access your ipfs-hosted site without any extra configuration at "),a("code",[e._v("http://your.domain")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"use-cnames"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-cnames"}},[e._v("#")]),e._v(" Use CNAMEs")]),e._v(" "),a("p",[e._v("Alternatively, it is possible to use CNAME records to point at the DNS records of the gateway. This way, IP addresses of the gateway are automatically updated.")]),e._v(" "),a("p",[e._v("However you will need to change the key for the TXT record from "),a("code",[e._v("your.domain")]),e._v(" to "),a("code",[e._v("_dnslink.your.domain")]),e._v(".")]),e._v(" "),a("p",[e._v("So by creating a CNAME for "),a("code",[e._v("your.domain")]),e._v(" to "),a("code",[e._v("gateway.ipfs.io")]),e._v(" and adding a "),a("code",[e._v("_dnslink.your.domain")]),e._v(" record with "),a("code",[e._v("dnslink=/ipns/<your peer id>")]),e._v(" you can host your website without explicitly referring to IP addresses of the ipfs gateway.")])])}),[],!1,null,null,null);t.default=s.exports}}]);¸T