
ê€à€(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{608:function(e,t,s){"use strict";s.r(t);var a=s(24),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"pin-files-using-ipfs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pin-files-using-ipfs"}},[e._v("#")]),e._v(" Pin files using IPFS")]),e._v(" "),s("p",[e._v('Pinning is a very important concept in IPFS. IPFS semantics try to make it feel like every single object is local â€” there is no "retrieve this file for me from a remote server", just '),s("code",[e._v("ipfs cat")]),e._v(" or "),s("code",[e._v("ipfs get")]),e._v(", which act the same way no matter where the actual object is located.")]),e._v(" "),s("p",[e._v("While this is nice, sometimes you want to be able to control what you keep around. "),s("strong",[e._v("Pinning")]),e._v(" is the mechanism that allows you to tell IPFS to always keep a given object somewhere â€” the default being your local node, though this can be different if you use a "),s("RouterLink",{attrs:{to:"/how-to/work-with-pinning-services/"}},[e._v("third-party remote pinning service")]),e._v(". IPFS has a fairly aggressive caching mechanism that will keep an object local for a short time after you perform any IPFS operation on it, but these objects may get garbage-collected regularly. To prevent that garbage collection, simply pin the CID you care about, or add it to "),s("RouterLink",{attrs:{to:"/concepts/file-systems/#mutable-file-system-mfs"}},[e._v("MFS")]),e._v(". Objects added through "),s("code",[e._v("ipfs add")]),e._v(" are pinned recursively by default. Things in MFS are not pinned by default, but are protected from garbage-collection, so one can think about MFS as a mechanism for implicit pinning.")],1),e._v(" "),s("p",[e._v("Let's look at this example to explore pinning to your local IPFS node in a bit more depth:")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("First, create a file called "),s("code",[e._v("foo")]),e._v(" with the contents "),s("code",[e._v("ipfs rocks")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ipfs rocks"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" foo    \n")])])]),s("p",[e._v("The "),s("code",[e._v("echo")]),e._v(" command does not give an output when using the "),s("em",[e._v("output redirection")]),e._v(" "),s("code",[e._v(">")]),e._v(" instruction.")])]),e._v(" "),s("li",[s("p",[e._v("Next, add "),s("code",[e._v("foo")]),e._v(" to IPFS using the "),s("code",[e._v("ipfs add")]),e._v(" command:")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("ipfs "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" foo               \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" added QmRTV3h1jLcACW4FRfdisokkQAk4E4qDhUzGpgdrd4JAFy foo\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Next, generate a list of all the objects you have pinned to your local storage.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("ipfs pin "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v(" --type"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("all     \n\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc recursive\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" QmRTV3h1jLcACW4FRfdisokkQAk4E4qDhUzGpgdrd4JAFy recursive\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" QmQy6xmJhrcC5QLboAcGFcAE1tC8CrwDVkrHdEYJkLscrQ indirect\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),s("p",[e._v("The "),s("code",[e._v("pin ls")]),e._v(" command will list all objects that are pinned to your local storage, "),s("code",[e._v("--type=all")]),e._v(" means it will list all the different kinds of pins (recursive, indirect, etc.).")])]),e._v(" "),s("li",[s("p",[e._v("Next, use the "),s("code",[e._v("pin rm <foo hash>")]),e._v(" command to unpin the target object.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("ipfs pin "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("foo hash"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("     \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" unpinned QmRTV3h1jLcACW4FRfdisokkQAk4E4qDhUzGpgdrd4JAFy\n")])])]),s("p",[e._v("This will remove the "),s("code",[e._v("foo hash")]),e._v(" object from your pinned items.")])]),e._v(" "),s("li",[s("p",[e._v("Next, attempt to run the same command as the previous step.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("ipfs pin "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("foo hash"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("     \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" Error: not pinned or pinned indirectly\n")])])]),s("p",[e._v("Attempting to run "),s("code",[e._v("ipfs pin rm <foo hash>")]),e._v(" again here will return an error, this is because the previous step has already removed the pin from "),s("code",[e._v("<foo hash>")]),e._v(".")])]),e._v(" "),s("li",[s("p",[e._v("Next, generate a new list of all pinned objects.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("ipfs pin "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v(" --type"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("all    \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc recursive\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" QmQy6xmJhrcC5QLboAcGFcAE1tC8CrwDVkrHdEYJkLscrQ indirect\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),s("p",[e._v("You will notice that this list is the exact same as the previous one above, except the "),s("code",[e._v("<foo hash>")]),e._v(" is no longer listed.")])])]),e._v(" "),s("h2",{attrs:{id:"three-kinds-of-pins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#three-kinds-of-pins"}},[e._v("#")]),e._v(" Three kinds of pins")]),e._v(" "),s("p",[e._v("As you may have noticed in the example above, the first "),s("code",[e._v("ipfs pin rm")]),e._v(" command didn't work â€” it should have warned you that the given hash was "),s("em",[e._v("pinned recursively")]),e._v(". What does this mean? There are three types of pins in the IPFS world:")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Direct pins")]),e._v(", which pin just a single block and no others in relation to it.")]),e._v(" "),s("li",[s("strong",[e._v("Recursive pins")]),e._v(", which pin a given block and all of its children.")]),e._v(" "),s("li",[s("strong",[e._v("Indirect pins")]),e._v(", which are the result of a given block's parent being pinned recursively.")])]),e._v(" "),s("p",[e._v("A pinned object cannot be garbage-collected â€” try this for proof:")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("First, add "),s("code",[e._v("foo")]),e._v(" to IPFS.")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("ipfs "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" foo           \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" added QmRTV3h1jLcACW4FRfdisokkQAk4E4qDhUzGpgdrd4JAFy foo\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(" B / "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(" B "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("100.00")]),e._v("%\n")])])]),s("p",[e._v("This will add the file "),s("code",[e._v("foo")]),e._v(" to IPFS.")])]),e._v(" "),s("li",[s("p",[e._v("Next, use the "),s("code",[e._v("repo gc")]),e._v(" command to perform garbage collection on the repository.")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("ipfs repo gc\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" removed QmVoSaWpZYicoLSAcdwxDPt2Gk4WVFCfBFTBtwwY2ASD9P\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" removed QmcpK3cSDyPGiNriMZrZTNu8YCPBSiMAApuvMqXaJVyuWr\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" removed QmdpczDhBmrkxerCUWkEcRExcTHFcA4EcDCeYNdXcV5iqE\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),s("p",[e._v("The "),s("code",[e._v("repo gc")]),e._v(" command will remove all unpinned objects from IPFS.")])]),e._v(" "),s("li",[s("p",[e._v("Next, use command "),s("code",[e._v("cat <foo hash>")]),e._v(" to show the contents of "),s("code",[e._v("foo")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("ipfs "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("foo hash"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("    \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ipfs rocks\n")])])]),s("p",[e._v("The command will return "),s("code",[e._v("ipfs rocks")]),e._v(" as the "),s("code",[e._v("<foo hash>")]),e._v(" was pinned, therefore it can't be removed.")])])]),e._v(" "),s("p",[e._v("But if "),s("code",[e._v("foo")]),e._v(" were to somehow become unpinned ...")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Use the "),s("code",[e._v("pin rm")]),e._v(" command to unpin "),s("code",[e._v("<foo hash>")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("ipfs pin "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("foo hash"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("    \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" unpinned QmRTV3h1jLcACW4FRfdisokkQAk4E4qDhUzGpgdrd4JAFy\n")])])]),s("p",[e._v("This will unpin "),s("code",[e._v("foo")]),e._v(".")])]),e._v(" "),s("li",[s("p",[e._v("Now, run the garbage collection command again.")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("ipfs repo gc              \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" removed QmPPjksRv8SqiibAy6bSAXBnnfcBf3QnTnApxWjcFUTTkZ                                                \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" removed QmS3wrDNoaRtRi84K7Hf8jzh5sBZcwrQFj7CZLmmmacS2U                                                \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" removed QmRTV3h1jLcACW4FRfdisokkQAk4E4qDhUzGpgdrd4JAFy\n")])])]),s("p",[e._v("Just like before, this will remove all unpinned objects from IPFS.")])]),e._v(" "),s("li",[s("p",[e._v("Finally, run "),s("code",[e._v("cat <foo hash>")]),e._v(" again to see if it returns the contents of "),s("code",[e._v("foo")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("ipfs "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("foo hash"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("       \n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ipfs rocks\n")])])]),s("p",[e._v("You will notice it still returns the correct response, this is because while "),s("code",[e._v("<foo hash>")]),e._v(" was removed from your local storage, the data still exists over IPFS.")])])]),e._v(" "),s("h2",{attrs:{id:"local-versus-remote-pinning"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#local-versus-remote-pinning"}},[e._v("#")]),e._v(" Local versus remote pinning")]),e._v(" "),s("p",[e._v("All the information above assumes that you're pinning items locally â€” that is, to your local IPFS node. That's the default behavior for IPFS, but it's also possible to pin your files to a "),s("em",[e._v("remote pinning service")]),e._v(". These third-party services give you the opportunity to pin files not to your own local node, but to nodes that they operate. You don't need to worry about your own node's available disk space or uptime.")]),e._v(" "),s("p",[e._v("While you can use a remote pinning service's own GUI, CLI, or other dev tools to manage IPFS files pinned to their service, you can also work directly with pinning services using your local IPFS installation â€” meaning that you don't need to learn a pinning service's unique API or other tooling.")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("The "),s("a",{attrs:{href:"https://ipfs.github.io/pinning-services-api-spec/",target:"_blank",rel:"noopener noreferrer"}},[e._v("IPFS Pinning Service API"),s("OutboundLink")],1),e._v(" offers a specification that enables developers to integrate any pinning service that supports the spec, or create their own. Thanks to the OpenAPI spec format, both clients and servers can be "),s("a",{attrs:{href:"https://github.com/ipfs/pinning-services-api-spec#code-generation",target:"_blank",rel:"noopener noreferrer"}},[e._v("generated"),s("OutboundLink")],1),e._v(" from the YAML spec file.")])]),e._v(" "),s("li",[s("p",[e._v("If you use go-ipfs 0.8+ from the command line, you have access to "),s("code",[e._v("ipfs pin remote")]),e._v(" commands acting as a client for interacting with pinning service APIs. Add your favorite pinning service(s), pin CIDs under human-readable names, get pin statuses, and more, straight from the CLI. "),s("RouterLink",{attrs:{to:"/how-to/work-with-pinning-services/"}},[e._v("Learn how â†’")])],1)]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://github.com/ipfs-shipyard/ipfs-desktop",target:"_blank",rel:"noopener noreferrer"}},[e._v("IPFS Desktop"),s("OutboundLink")],1),e._v(" and its equivalent in-browser IPFS web interface, the "),s("a",{attrs:{href:"https://github.com/ipfs-shipyard/ipfs-webui",target:"_blank",rel:"noopener noreferrer"}},[e._v("IPFS Web UI"),s("OutboundLink")],1),e._v(", both support remote pinning services, so you can pin to your favorite pinning service(s) straight from the UI. "),s("RouterLink",{attrs:{to:"/how-to/work-with-pinning-services/"}},[e._v("Learn how â†’")])],1)])])])}),[],!1,null,null,null);t.default=o.exports}}]);à€