
…!ý (window.webpackJsonp=window.webpackJsonp||[]).push([[70],{596:function(e,t,r){"use strict";r.r(t);var s=r(24),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"support-for-dnslink-in-ipfs-companion"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#support-for-dnslink-in-ipfs-companion"}},[e._v("#")]),e._v(" Support for DNSLink in IPFS Companion")]),e._v(" "),r("p",[e._v("DNSLink maps a domain name to an IPFS address using DNS TXT records. Read the "),r("RouterLink",{attrs:{to:"/concepts/dnslink/"}},[e._v("DNSLink guide")]),e._v(" for full details, including how to set it up on your website.")],1),e._v(" "),r("h2",{attrs:{id:"lookup-cache"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#lookup-cache"}},[e._v("#")]),e._v(" Lookup cache")]),e._v(" "),r("p",[e._v("Results of DNS TXT lookups are stored in a "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_Recently_Used",target:"_blank",rel:"noopener noreferrer"}},[e._v("Least Recently Used (LRU)"),r("OutboundLink")],1),e._v(" cache of size 1000 and max-age 12h. The cache is in-memory and does not persist between restarts.")]),e._v(" "),r("h2",{attrs:{id:"dns-txt-lookup-policies"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dns-txt-lookup-policies"}},[e._v("#")]),e._v(" DNS TXT lookup policies")]),e._v(" "),r("h3",{attrs:{id:"off-disabled"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#off-disabled"}},[e._v("#")]),e._v(" Off (disabled)")]),e._v(" "),r("p",[e._v("There are no DNS TXT lookups when this policy is selected. It means DNSLink support is disabled.")]),e._v(" "),r("h3",{attrs:{id:"check-after-http-request-best-effort"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#check-after-http-request-best-effort"}},[e._v("#")]),e._v(' Check after HTTP request ("best-effort")')]),e._v(" "),r("p",[e._v("This policy is the most efficient lookup strategy, but in rare cases, it may yield false negatives on the first load.")]),e._v(" "),r("p",[e._v("DNSLink redirect is enabled and happens before the HTTP request if DNSLink is already in cache. If not in the cache, the DNS TXT lookup is executed and cached in the background without blocking the page load.")]),e._v(" "),r("p",[e._v("Blocking lookups are executed only for domains that return an HTTP response with "),r("RouterLink",{attrs:{to:"/how-to/companion-x-ipfs-path-header/"}},[e._v("x-ipfs-path header")]),e._v(") or return a connection error.")],1),e._v(" "),r("h3",{attrs:{id:"check-before-http-request-enabled"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#check-before-http-request-enabled"}},[e._v("#")]),e._v(" Check before HTTP request (enabled)")]),e._v(" "),r("p",[e._v("The DNS TXT lookup is executed for every hostname before any HTTP request is made. No false negatives occur under this scenario.")]),e._v(" "),r("p",[e._v("This method removes the need for sending HTTP requests to a remote server if DNSLink is present but may impact browser performance. Every request to a new domain name gets blocked until the TXT lookup finishes.")]),e._v(" "),r("p",[e._v("There is room for improvement in this approach. Web browsers do not expose an efficient DNS TXT lookup API "),r("a",{attrs:{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1449171",target:"_blank",rel:"noopener noreferrer"}},[e._v("yet"),r("OutboundLink")],1),e._v(". HTTP-based lookups via "),r("code",[e._v("/api/v0/dns/${fqdn}")]),e._v(" with userland caching are used as a fallback.")]),e._v(" "),r("h2",{attrs:{id:"further-resources"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#further-resources"}},[e._v("#")]),e._v(" Further resources")]),e._v(" "),r("ul",[r("li",[r("RouterLink",{attrs:{to:"/how-to/companion-x-ipfs-path-header/"}},[r("code",[e._v("x-ipfs-path")]),e._v(" header support in IPFS Companion")])],1),e._v(" "),r("li",[r("a",{attrs:{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1449171",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bugzilla bug 1449171: Add DNS TXT resolution to dns.resolve WebExtensions API"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=o.exports}}]);ý 